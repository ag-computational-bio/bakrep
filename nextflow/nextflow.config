manifest {
    author = 'Linda Fenske'
    name = '661k_project'
    homePage = 'https://github.com/ag-computational-bio/bakrep'
    description = 'A workflow for taxonomic classification, quality control and annotation of the dataset published by Blackwell et al. (https://doi.org/10.1371/journal.pbio.3001421).'
    mainScript = '661k.nf'
    version = '0.1.0'
    nextflowVersion = '>=20'
}

params {
/*
	Defines some default parameters. These can be adjusted via the command line when runnig the pipeline.
	The default executor is 'local'. To use the slurm cluster add the parameter '-profile slurm'.
*/
    db = "${params.setupdir}/database"
    gtdb = "${db}/gtdb/release207v2/"
    checkm2db = "${db}/checkm2/bin"
    baktadb = "${db}/baktadb/db/"
    data = "${params.setupdir}/assemblies"
    results = "${params.setupdir}/results"
}	

/*
	Defines profiles for local execution or execution via the slurm-cluster.
*/

profiles {
    standard {
		process.executor = 'local'
		params.threads = Runtime.runtime.availableProcessors()
    }
    
    cluster {
		process.executor = 'slurm'
		process.queue = 'bcf'
		process.clusterOptions = '--nice=10'
		stageOutMode = 'rsync'
    }
}

executor {
    name = 'slurm'
    queueSize = 2000
    pollInterval = '10 sec'
}

conda {
    useMamba = true
}

report {
    enabled = true
    overwrite = true
	file = '661k_nf.report.html'
}

timeline {
    enabled = true
    overwrite = true
}

trace {
    enabled = true
    overwrite = true
}

dag {
	enabled = true
	overwrite = true
	file = '661k_nf.dag.png'
}	